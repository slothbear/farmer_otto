#!/usr/bin/env ruby

require 'farmer_otto'
require 'optparse'

options = Hash.new
option_parser = OptionParser.new do |opts|
  program = File.basename($PROGRAM_NAME)
  opts.banner = "Ask Farmer Otto to perform the tasks in a script file.

usage: #{program} [options] script_file

"
end
option_parser.parse!

if ARGV.empty?
  puts 'error: Otto needs a script file name'
  puts
  puts option_parser.help
  exit 1
else
  args = ARGV.dup
  script = args.shift
  unless File.exist?(script)
    puts "script file '#{script}' not found"
    exit 1
  end
end

otto = FarmerOtto.new(args)
otto.run_script(script)
